{
  "timestamp": "2025-08-18 23:27:02",
  "query_profiling": {
    "total_messages": 326089,
    "fts_messages": 326089,
    "query_profiles": [
      {
        "name": "Simple match",
        "query": "SELECT COUNT(*) FROM messages_fts WHERE messages_fts MATCH 'test'",
        "execution_plan": [
          {
            "step": 0,
            "table": 132,
            "detail": "SCAN messages_fts VIRTUAL TABLE INDEX 0:M1"
          }
        ],
        "avg_time_ms": 0.20532479975372553,
        "min_time_ms": 0.16987501294352114,
        "max_time_ms": 0.3124579961877316,
        "result_count": 1714
      },
      {
        "name": "Complex AND",
        "query": "SELECT COUNT(*) FROM messages_fts WHERE messages_fts MATCH 'project AND meeting'",
        "execution_plan": [
          {
            "step": 0,
            "table": 132,
            "detail": "SCAN messages_fts VIRTUAL TABLE INDEX 0:M1"
          }
        ],
        "avg_time_ms": 0.4046584013849497,
        "min_time_ms": 0.3673330065794289,
        "max_time_ms": 0.4954999894835055,
        "result_count": 153
      },
      {
        "name": "Phrase search",
        "query": "SELECT COUNT(*) FROM messages_fts WHERE messages_fts MATCH '\"all hands meeting\"'",
        "execution_plan": [
          {
            "step": 0,
            "table": 132,
            "detail": "SCAN messages_fts VIRTUAL TABLE INDEX 0:M1"
          }
        ],
        "avg_time_ms": 0.709400197956711,
        "min_time_ms": 0.6712090107612312,
        "max_time_ms": 0.8170419896487147,
        "result_count": 40
      },
      {
        "name": "Date filter",
        "query": "SELECT COUNT(*) FROM messages WHERE date = '2025-08-16'",
        "execution_plan": [
          {
            "step": 0,
            "table": 159,
            "detail": "SEARCH messages USING COVERING INDEX idx_messages_date (date=?)"
          }
        ],
        "avg_time_ms": 0.4630833980627358,
        "min_time_ms": 0.3817919932771474,
        "max_time_ms": 0.6197089969646186,
        "result_count": 31102
      },
      {
        "name": "Source filter",
        "query": "SELECT COUNT(*) FROM messages WHERE source = 'slack'",
        "execution_plan": [
          {
            "step": 0,
            "table": 192,
            "detail": "SEARCH messages USING COVERING INDEX idx_messages_source (source=?)"
          }
        ],
        "avg_time_ms": 5.443333397852257,
        "min_time_ms": 4.9979169853031635,
        "max_time_ms": 5.838500015670434,
        "result_count": 325592
      },
      {
        "name": "Combined filter",
        "query": "SELECT COUNT(*) FROM messages m JOIN messages_fts f ON m.rowid = f.rowid WHERE f.messages_fts MATCH 'company' AND m.source = 'slack'",
        "execution_plan": [
          {
            "step": 0,
            "table": 132,
            "detail": "SCAN f VIRTUAL TABLE INDEX 0:M1"
          },
          {
            "step": 0,
            "table": 44,
            "detail": "SEARCH m USING INTEGER PRIMARY KEY (rowid=?)"
          }
        ],
        "avg_time_ms": 1965.852683398407,
        "min_time_ms": 220.46625000075437,
        "max_time_ms": 7688.592208985938,
        "result_count": 214404
      }
    ],
    "slow_queries": 1,
    "existing_indexes": 3,
    "optimization_opportunities": [
      null,
      "Consider adding index on source column",
      null
    ]
  },
  "load_testing": {
    "test_config": {
      "num_users": 25,
      "queries_per_user": 10,
      "total_queries": 250
    },
    "execution": {
      "total_time": 3.9221749170101248,
      "queries_per_second": 63.74014552889321,
      "concurrent_users_supported": 25
    },
    "performance": {
      "successful_queries": 250,
      "failed_queries": 0,
      "success_rate": 100.0,
      "avg_search_time": 0.0036485850438475608,
      "p95_search_time": 0.018208916997537017,
      "p99_search_time": 0.024466834001941606,
      "max_search_time": 0.028506916016340256
    },
    "pattern_analysis": {
      "executive_search": {
        "count": 50,
        "avg_time": 0.0033096534037031235,
        "max_time": 0.020609291997971013
      },
      "project_search": {
        "count": 78,
        "avg_time": 0.0028136832682857625,
        "max_time": 0.02117262498359196
      },
      "general_search": {
        "count": 97,
        "avg_time": 0.004739936462785934,
        "max_time": 0.028506916016340256
      },
      "specific_search": {
        "count": 25,
        "avg_time": 0.0026968983584083617,
        "max_time": 0.01468987500993535
      }
    },
    "performance_targets": {
      "avg_under_1s": true,
      "p95_under_2s": true,
      "p99_under_5s": true,
      "success_rate_over_95": true
    }
  },
  "stress_testing": {
    "10_connections": {
      "concurrent_connections": 10,
      "successful_workers": 10,
      "failed_workers": 0,
      "success_rate": 100.0,
      "total_test_time": 0.03896091599017382,
      "database_stable": true
    },
    "25_connections": {
      "concurrent_connections": 25,
      "successful_workers": 25,
      "failed_workers": 0,
      "success_rate": 100.0,
      "total_test_time": 0.07534350000787526,
      "database_stable": true
    },
    "50_connections": {
      "concurrent_connections": 50,
      "successful_workers": 50,
      "failed_workers": 0,
      "success_rate": 100.0,
      "total_test_time": 0.15992283399100415,
      "database_stable": true
    },
    "100_connections": {
      "concurrent_connections": 100,
      "successful_workers": 100,
      "failed_workers": 0,
      "success_rate": 100.0,
      "total_test_time": 0.33187966598779894,
      "database_stable": true
    }
  },
  "assessment": {
    "database_healthy": true,
    "load_handling": true,
    "stress_tolerance": true,
    "overall_score": 3
  }
}